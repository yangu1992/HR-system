@{
    ViewBag.Title = "OfferEdit";
}
@Scripts.Render("~/Scripts/employeeAutoComplete.js")

@model NI.Apps.Hr.HrBase.Models.OfferActivity.OfferCreateModel

@using (Html.BeginForm("SaveChanges", "Offer", FormMethod.Post, new { id = "PostForm" }))
{
    @Html.Partial("_OfferBaseInfoEditable", Model.Offer ?? new NI.Apps.Hr.HrBase.Models.OfferActivity.OfferDetailModel(),
                       new ViewDataDictionary { TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Offer" } });

    @Html.Partial("_OfferPersonInfoEditable", Model.Personel ?? new NI.Apps.Hr.HrBase.Models.OfferActivity.PersonelDetailModel(),
                   new ViewDataDictionary { TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Personel" }})

    @Html.Partial("_OfferPositionInfoEditable",Model)
}

<script type="text/javascript">
    $('.Date').attr('readOnly', 'true');
    $('.Date').datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: "yy/mm/dd"
    });

    var getEmployeeEmailURL = '@Url.Action("GetEmployeesEmails", "Offer")';

    $("#SaveChangesBtn").bind('click', function (event) {
        $("#PostForm").submit();
    });

    $("#Offer_RecruitType").change(function () {
        var recruitmentType = $("#Offer_RecruitType").val();
        if (recruitmentType == 'Campus') {
            $(".attr_for_campus").show();
            $("#Offer_Channel").val("Campus");
        } else {
            $(".attr_for_campus").hide();
        }
    });


    $(window).load(function () {
        var status = $("#Salary_bonus").is(":checked");
        if (status == false) {
            $(".bonus_section").hide();
        }

        var recruitmentType = $("#Offer_RecruitType").val();
        if (recruitmentType == 'Campus') {
            $(".attr_for_campus").show();
        } else {
            $(".attr_for_campus").hide();
        }
    });
</script>
